# logger-task

Данный проект представляет собой динамическую библиотеку для записи сообщений в журнал и консольное многопоточное приложение, демонстрирующее возможности этой библиотеки. Приложение разработано с использованием стандарта C++17 и предназначено для работы в среде Linux с компилятором GCC. Основное назначение проекта – предоставить надежное, простое и масштабируемое решение для логирования сообщений с различными уровняами важности, которое можно интегрировать в более крупные системы для обеспечения корректного ведения журналов.

Исходный код библиотеки разделен на два основных файла – Logger.h и Logger.cpp. В них реализован класс Logger, который предоставляет интерфейс для записи сообщений в текстовый файл с учетом уровня важности. Время, когда сообщение было получено, форматируется и добавляется к тексту сообщения, а сам процесс записи защищается механизмами синхронизации, что гарантирует корректное выполнение в многопоточной среде. Библиотека позволяет задавать уровень важности по умолчанию, а также изменять его в процессе работы приложения, что дает возможность гибко управлять записями в журнале.

## Библиотека для записи текстовых сообщений в журнал

Это простая динамическая библиотека для записи текстовых сообщений в журнал на C++. Сообщения записываются с разными уровнями важности в текстовый файл.

### Особенности приложения

- Поддерживаются три уровня важности сообщения: `Low`, `Medium`, `High`.
- Многопоточная запись.
- Настройка уровня сообщений по умолчанию.
- Все сообщения с уровнем ниже, чем уровень по умолчанию, игнорируются.

### Сборка

1. Клонирование репозитория:
   ```bash
   git clone https://github.com/danilgabdiev/infotecs_logger.git

2. Для сборки библиотеки используется Makefile в корневом каталоге проекта. Для сборки выполните:
   ```bash
   make

### Основные функции

#### `log(const std::string &message, LogLevel level)`

Добавление сообщения с заданным уровнем в журнал. Если уровень ниже уровня по умолчанию, то сообщение игнорируется.

#### Пример использования:

```c++
#include "Logger.h"
using namespace LoggerLib;

int main() {
    Logger logger("log.txt", LogLevel::Low);
    logger.log("Hello world", LogLevel::High);
    return 0;
}
```

#### `log(const std::string &message)`

Добавление сообщения с использованием уровня по умолчанию в журнал.

#### Пример использования:

```c++
#include "Logger.h"
using namespace LoggerLib;

int main() {
    Logger logger("log.txt", LogLevel::Low);
    logger.log("Hello world");
    return 0;
}
```

## Приложение

Консольное приложение, используемое с помощью терминала bash и демонстрирующее работу библиотеки на C++.

### Особенности 

Используется параллельная запись.
Поддерживаются три уровня важности сообщения: `Low`, `Medium`, `High`.
### Использование
1. Для сборки приложения используется Makefile в корневом каталоге проекта. Для сборки выполните:
```bash
make
```

2. Для запуска приложения выполните:
```bash
LD_LIBRARY_PATH=. ./logger_app [Название файла для записи] [Уровень сообщений по умолчанию]
```

Пример:
```bash
LD_LIBRARY_PATH=. ./logger_app log.txt Medium
```

3. Чтобы ввести сообщение, напишите:
```bash
[Сообщение] | [Уровень важности сообщения]
```

4. Дополнительно в проекте реализованы автоматизированные тесты для проверки корректности работы библиотеки. Для сборки тестового приложения выполните:
```bash
make tests
```

Запуск тестов осуществляется командой:
```bash
./tests
```

При успешном прохождении тестов будет выведено сообщение `All tests passed`.

В случае возникновения проблем с поиском динамической библиотеки при запуске приложения, убедитесь, что переменная окружения LD_LIBRARY_PATH содержит путь к каталогу с файлом logger_lib.so или выполните приложение так, чтобы текущий каталог был добавлен в список поиска динамических библиотек с помощью опции LD_LIBRARY_PATH=.
